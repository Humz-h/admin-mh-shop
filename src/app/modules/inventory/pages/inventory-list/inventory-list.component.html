<div class="inventory-management">
  <!-- Back to Dashboard Button -->
  <div class="back-navigation">
    <button class="btn btn-secondary" (click)="goBack()">
      ‚Üê Quay l·∫°i Dashboard
    </button>
  </div>

  <!-- Header Section -->
  <div class="page-header floating">
    <div class="header-content">
      <h1 class="page-title">Qu·∫£n l√Ω t·ªìn kho</h1>
      <p class="page-subtitle">Qu·∫£n l√Ω kho h√†ng v√† xu·∫•t nh·∫≠p kho</p>
    </div>
    <div class="header-actions">
      <button class="btn btn-secondary" (click)="refreshInventories()" title="L√†m m·ªõi d·ªØ li·ªáu">
        <span class="btn-icon">üîÑ</span>
        L√†m m·ªõi
      </button>
    </div>
  </div>

  <!-- Loading State -->
  <div class="loading-container" *ngIf="loading && !showSkeleton">
    <div class="loading-spinner"></div>
    <p>ƒêang t·∫£i danh s√°ch t·ªìn kho...</p>
  </div>

  <!-- Skeleton Loading -->
  <div class="skeleton-container" *ngIf="showSkeleton">
    <div class="skeleton-table">
      <div class="skeleton-header">
        <div class="skeleton-cell" *ngFor="let i of [1,2,3,4,5,6]"></div>
      </div>
      <div class="skeleton-row" *ngFor="let i of [1,2,3,4,5,6,7,8,9,10]">
        <div class="skeleton-cell skeleton-text"></div>
        <div class="skeleton-cell skeleton-text"></div>
        <div class="skeleton-cell skeleton-badge"></div>
        <div class="skeleton-cell skeleton-date"></div>
        <div class="skeleton-cell skeleton-badge"></div>
        <div class="skeleton-cell skeleton-actions"></div>
      </div>
    </div>
  </div>

  <!-- Error State -->
  <div class="error-container" *ngIf="errorMessage && !loading && !showSkeleton">
    <div class="error-message">
      <span class="error-icon">‚ö†Ô∏è</span>
      <p>{{ errorMessage }}</p>
      <button class="btn btn-primary" (click)="loadInventories()">Th·ª≠ l·∫°i</button>
    </div>
  </div>

  <!-- Inventory Table -->
  <div class="table-container" *ngIf="!loading && !errorMessage && !showSkeleton && inventories.length > 0">
    <table class="inventory-table">
      <thead>
        <tr>
          <th>T√™n s·∫£n ph·∫©m</th>
          <th>M√£ s·∫£n ph·∫©m</th>
          <th>S·ªë l∆∞·ª£ng t·ªìn</th>
          <th>Ng√†y nh·∫≠p g·∫ßn nh·∫•t</th>
          <th>Ng√†y trong kho</th>
          <th>Thao t√°c</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let item of inventories; trackBy: trackByProductId">
          <td class="product-name">
            <span class="name">{{ getProductName(item) }}</span>
          </td>
          <td>
            <span class="product-code">{{ getProductCode(item) }}</span>
          </td>
          <td class="quantity-cell">
            <span class="quantity-badge" 
                  [class.low-stock]="getQuantity(item) > 0 && getQuantity(item) < 10" 
                  [class.out-of-stock]="getQuantity(item) === 0">
              {{ getQuantity(item) }}
            </span>
          </td>
          <td>
            <span *ngIf="item.lastImportDate">{{ item.lastImportDate | date: 'dd/MM/yyyy HH:mm' }}</span>
            <span *ngIf="!item.lastImportDate">-</span>
          </td>
          <td>{{ getDaysInStock(item) }} ng√†y</td>
          <td>
            <div class="action-buttons">
              <button class="btn-action btn-import" 
                      (click)="importStock(getProductId(item))" 
                      title="Nh·∫≠p kho"
                      [disabled]="!getProductId(item)">
                üì•
              </button>
              <button class="btn-action btn-export" 
                      (click)="exportStock(getProductId(item))" 
                      title="Xu·∫•t kho"
                      [disabled]="!getProductId(item)">
                üì§
              </button>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Empty state -->
  <div class="empty-state" *ngIf="!loading && !errorMessage && !showSkeleton && inventories.length === 0">
    <div class="empty-message">
      <span class="empty-icon">üì¶</span>
      <p>Kh√¥ng c√≥ d·ªØ li·ªáu t·ªìn kho</p>
    </div>
  </div>
</div>
